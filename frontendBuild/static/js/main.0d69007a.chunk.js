(this["webpackJsonprainbow-tracker"]=this["webpackJsonprainbow-tracker"]||[]).push([[0],{127:function(e,t,n){},196:function(e,t,n){},197:function(e,t,n){},199:function(e,t,n){},200:function(e,t,n){},201:function(e,t,n){},202:function(e,t,n){},203:function(e,t,n){},204:function(e,t,n){},205:function(e,t,n){},206:function(e,t,n){},207:function(e,t,n){},208:function(e,t,n){},213:function(e,t,n){},214:function(e,t,n){},215:function(e,t,n){},216:function(e,t,n){},217:function(e,t,n){},218:function(e,t,n){},219:function(e,t,n){},220:function(e,t,n){},221:function(e,t,n){},222:function(e,t,n){},223:function(e,t,n){},224:function(e,t,n){},225:function(e,t,n){},355:function(e,t,n){},356:function(e,t,n){},357:function(e,t,n){},361:function(e,t,n){},362:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(69),o=n.n(c),i=n(16),s=n(184),l=n(4),u=n.n(l),d=n(11),f=n(27),p=n(22),g=n(8),y=(n(196),n(21)),b=Object(i.d)(),h=b.useStoreActions,j=(b.useStoreDispatch,b.useStoreState),v=(n(197),n(1)),m=function(e){var t=e.onClick,n=e.handleCloseModal,r=j((function(e){return e.settings.categoryTypes}));return Object(v.jsx)("div",{children:Object(v.jsxs)("div",{className:"popover-container",onMouseLeave:n,style:{cursor:"pointer"},children:[r.map((function(e,n){return Object(v.jsx)("div",{className:"color-square",onClick:function(){return t(e.categoryid)},style:{backgroundColor:e.color,borderTopLeftRadius:0===n?"3px":"0",borderTopRightRadius:0===n?"3px":"0"}},e.categoryid)})),Object(v.jsx)("div",{className:"default-color-square",onClick:function(){return t(null)}})]})})},x=(n(199),function(e){var t=e.onClick,n=e.handleCloseModal,r=e.categoryid,a=j((function(e){return e.settings.activityTypes}));return Object(v.jsx)("div",{children:Object(v.jsxs)("div",{id:"activity-popover-container",onMouseLeave:n,style:{cursor:"pointer"},children:[a.map((function(e,n){return e.categoryid===r?Object(v.jsx)("div",{id:"activity-popover-item",onClick:function(){return t(e.activityid)},style:{borderTopLeftRadius:0===n?"5px":"0",borderTopRightRadius:0===n?"5px":"0"},children:e.short},e.activityid):null})),Object(v.jsx)("div",{id:"activity-popover-item-default",onClick:function(){return t(null)}})]})})}),O=(n(200),function(e){var t=e.short,n=e.categoryid,r=e.onClick,a=e.block;return Object(v.jsx)("div",{className:"activity-container ".concat(n&&!a&&"activity-container-active"),onClick:function(){""===n||a||r()},children:t})}),w=(n(201),function(e,t){for(var n=0;n<t.length;n++){if(t[n].categoryid===e)return!0}return!1});var k=function(e){var t=e.category,n=e.onDragStart,a=e.onDragEnter,c=h((function(e){return e.settings.setHoverIndex})),o=h((function(e){return e.categories.setCategory})),i=h((function(e){return e.categories.setActivity})),s=j((function(e){return e.settings.activityTypes})),l=j((function(e){return e.settings.categoryTypes})),u=Object(r.useState)(!1),d=Object(g.a)(u,2),f=d[0],p=d[1],y=Object(r.useState)(!1),b=Object(g.a)(y,2),k=b[0],E=b[1];return Object(v.jsxs)("div",{id:"category-activity-container",onMouseOver:function(){return c({timeHoverIndex:t.categoryPosition-1})},children:[Object(v.jsx)("div",{id:"category-container",onDragEnter:function(){return a(t)},onDragStart:function(e){return n(e,t)},draggable:!0,onClick:function(){return E(!0)},style:{backgroundColor:function(){if(t.categoryid)for(var e=0;e<l.length;e++)if(l[e].categoryid===t.categoryid)return l[e].color;return"#2A353C"}()}}),Object(v.jsx)(O,{short:function(){if(t.activityid)for(var e=0;e<s.length;e++)if(s[e].activityid===t.activityid)return s[e].short;return""}(),categoryid:t.categoryid,block:!w(t.categoryid,s),onClick:function(){return p(!0)}}),k&&Object(v.jsx)(m,{onClick:function(e){E(!1),o({userid:t.userid,weekid:t.weekid,categoryid:e,weekDay:t.weekDay,categoryPosition:t.categoryPosition,activityid:null,weekDayDate:t.weekDayDate})},handleCloseModal:function(){return E(!1)}}),f&&Object(v.jsx)(x,{categoryid:t.categoryid,onClick:function(e){console.log(e),p(!1),i({activityid:e,weekDay:t.weekDay,categoryPosition:t.categoryPosition})},handleCloseModal:function(){return p(!1)}})]})},E=(n(202),function(e){return parseInt(e.slice(0,-2))}),T=function(e,t,n,r){return"".concat((e-t+1)*E(n)+(e-t)*E(r),"px")},D="22px",C="2px",S=function(e){var t=e.note,n=e.max,r=e.min,a=e.onDragStart,c=e.onDragEnter,o=e.onClick,i=e.onMouseDown,s=h((function(e){return e.settings.setHoverIndex}));return n===r?Object(v.jsx)("div",{id:"note-container",onMouseOver:function(){return s({timeHoverIndex:r-1})},onClick:function(){return o(t)},draggable:!0,onDragStart:function(e){return a(e,t)},onDragOver:function(){return c(t)},children:t.note}):Object(v.jsx)("div",{onMouseOver:function(){return s({timeHoverIndex:r-1})},id:"stack-container",style:{height:T(n,r,D,C),WebkitLineClamp:n-r+1},onClick:function(){return o(t)},onMouseDown:function(e){return i(e,t)},draggable:!0,onDragStart:function(e){return a(e,t)},onDragOver:function(){return c(t)},children:t.note})},P=function(e,t){var n=-1,r=-1,a=!0;return e.forEach((function(e,c){e.stackid===t&&(a?(n=e.notePosition,r=e.notePosition,a=!1):e.notePosition>n?n=e.notePosition:e.notePosition<r&&(r=e.notePosition))})),{max:n,min:r}};n(203);var N=function(e){var t=e.note,n=e.saveNote,a=e.deleteText,c=e.deleteStack,o=e.stack,i=Object(r.useState)(t.note),s=Object(g.a)(i,2),l=s[0],u=s[1];return Object(v.jsxs)("div",{id:"note-modal-container",onKeyDown:function(e){13!==e.which||e.shiftKey?27===e.keyCode&&(t.note=l,n(t)):(t.note=l,n(t),e.preventDefault())},children:[Object(v.jsx)("div",{id:"modal-textarea",children:Object(v.jsx)("textarea",{autoFocus:!0,id:"note-modal-input",onChange:function(e){u(e.target.value)},spellCheck:!1,value:l})}),Object(v.jsx)("div",{children:Object(v.jsxs)("div",{id:"note-modal-button-container",children:[o&&Object(v.jsx)("div",{id:"note-modal-delete-button",onClick:function(){return c(t)},children:"Delete stack"}),Object(v.jsx)("div",{id:"note-modal-delete-button",onClick:function(){return a(t)},children:"Delete text"})]})})]})};n(204);function I(e){var t=e.categories,n=e.notes,a=e.weekDay,c=h((function(e){return e.categories.categoryDragSet})),o=h((function(e){return e.notes.aboveDifference})),i=h((function(e){return e.notes.belowDifference})),s=h((function(e){return e.notes.setNoteText})),l=h((function(e){return e.notes.deleteNoteText})),u=h((function(e){return e.notes.deleteNoteStack})),d=h((function(e){return e.settings.setHoverIndex})),f=Object(r.useState)(null),p=Object(g.a)(f,2),b=p[0],j=p[1],m=function(e){j(e)},x=function(){var e=new Image(0,0);return e.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",e},O=Object(r.useState)(null),w=Object(g.a)(O,2),E=w[0],T=w[1],D=function(e,t){e.dataTransfer.setDragImage(x(),1,1),T(t),d({timeHoverIndex:t.categoryPosition-1})},C=function(e){E&&c({dragPosition:E.categoryPosition,draggedIntoPosition:e.categoryPosition,weekDay:a,dragCategoryid:E.categoryid,dragActivityid:E.activityid}),d({timeHoverIndex:e.categoryPosition-1})},I=Object(r.useState)(null),_=Object(g.a)(I,2),A=_[0],M=_[1],B=function(e,t){e.dataTransfer.setDragImage(x(),1,1),M(t),d({timeHoverIndex:t.notePosition-1})},L=function(e){if(A){var t=P(n,e.stackid),r=P(n,A.stackid);e.notePosition>r.max?(d({timeHoverIndex:r.max}),i({draggedIntoPosition:e.notePosition,dragPosition:A.notePosition,weekDay:e.weekDay,dragStackid:A.stackid,oldStackid:e.stackid,oldNote:e.note})):e.notePosition<r.min&&(d({timeHoverIndex:r.min-2}),o({draggedIntoPosition:t.max,dragPosition:A.notePosition,weekDay:e.weekDay,dragStackid:A.stackid,dragNoteText:A.note}))}},H=function(e,t){var r=P(n,t.stackid),a=r.max,c=r.min;1===e.button&&a!==c&&u({weekDay:t.weekDay,stackid:t.stackid})};return Object(v.jsxs)("div",{className:"day-container",onDragEndCapture:function(){M(null),T(null)},children:[Object(v.jsxs)("div",{className:"day-header",children:[Object(v.jsx)("p",{className:"day-header__day",children:"".concat(y.Info.weekdays()[a])}),Object(v.jsx)("p",{className:"day-header__date",children:"".concat(y.DateTime.fromISO(t[0].weekDayDate).toLocaleString({month:"long",day:"numeric"}))})]}),Object(v.jsxs)("div",{className:"composition-container",children:[Object(v.jsx)("div",{className:"activity-outer-container",children:t.map((function(e){return Object(v.jsx)(k,{category:e,onDragStart:D,onDragEnter:C},e.categoryPosition)}))}),Object(v.jsx)("div",{className:"note-outer-container",children:n.map((function(e){var t=P(n,e.stackid),r=t.max,a=t.min;return e.notePosition===a?Object(v.jsx)(S,{note:e,max:r,min:a,onDragStart:B,onDragEnter:L,onClick:m,onMouseDown:H},e.notePosition):null}))})]}),b&&Object(v.jsx)("div",{id:"note-modal-wrapper",children:Object(v.jsx)(N,{stack:P(n,b.stackid).max!==P(n,b.stackid).min,deleteStack:function(e){u(e),j(null)},deleteText:function(e){l(e),j(null)},saveNote:function(e){s(e),j(null)},note:b})})]})}var _,A,M=function(e,t){return JSON.stringify(e.notes)===JSON.stringify(t.notes)&&JSON.stringify(e.categories)===JSON.stringify(t.categories)},B=a.a.memo(I,M),L=function(){var e=["00","15","30","45"],t=["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23"],n=[];for(var r in t)for(var a in e)n.push("".concat(t[r],":").concat(e[a]));return n},H=(n(205),function(e){var t=e.timeValues,n=j((function(e){return e.settings.timeHoverIndex}));return Object(v.jsx)("div",{className:"time-cell-container",children:t().map((function(e,t){return Object(v.jsx)("div",{className:"time-cell",style:{backgroundColor:n===t?"#314149":"transparent"},children:e},t)}))})}),z=(n(206),["title","titleId"]);function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function R(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function F(e,t){var n=e.title,a=e.titleId,c=R(e,z);return r.createElement("svg",W({width:135,height:135,viewBox:"0 0 135 135",xmlns:"http://www.w3.org/2000/svg",fill:"rgb(196, 136, 82)",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,_||(_=r.createElement("path",{d:"M67.447 58c5.523 0 10-4.477 10-10s-4.477-10-10-10-10 4.477-10 10 4.477 10 10 10zm9.448 9.447c0 5.523 4.477 10 10 10 5.522 0 10-4.477 10-10s-4.478-10-10-10c-5.523 0-10 4.477-10 10zm-9.448 9.448c-5.523 0-10 4.477-10 10 0 5.522 4.477 10 10 10s10-4.478 10-10c0-5.523-4.477-10-10-10zM58 67.447c0-5.523-4.477-10-10-10s-10 4.477-10 10 4.477 10 10 10 10-4.477 10-10z"},r.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 67 67",to:"-360 67 67",dur:"2.5s",repeatCount:"indefinite"}))),A||(A=r.createElement("path",{d:"M28.19 40.31c6.627 0 12-5.374 12-12 0-6.628-5.373-12-12-12-6.628 0-12 5.372-12 12 0 6.626 5.372 12 12 12zm30.72-19.825c4.686 4.687 12.284 4.687 16.97 0 4.686-4.686 4.686-12.284 0-16.97-4.686-4.687-12.284-4.687-16.97 0-4.687 4.686-4.687 12.284 0 16.97zm35.74 7.705c0 6.627 5.37 12 12 12 6.626 0 12-5.373 12-12 0-6.628-5.374-12-12-12-6.63 0-12 5.372-12 12zm19.822 30.72c-4.686 4.686-4.686 12.284 0 16.97 4.687 4.686 12.285 4.686 16.97 0 4.687-4.686 4.687-12.284 0-16.97-4.685-4.687-12.283-4.687-16.97 0zm-7.704 35.74c-6.627 0-12 5.37-12 12 0 6.626 5.373 12 12 12s12-5.374 12-12c0-6.63-5.373-12-12-12zm-30.72 19.822c-4.686-4.686-12.284-4.686-16.97 0-4.686 4.687-4.686 12.285 0 16.97 4.686 4.687 12.284 4.687 16.97 0 4.687-4.685 4.687-12.283 0-16.97zm-35.74-7.704c0-6.627-5.372-12-12-12-6.626 0-12 5.373-12 12s5.374 12 12 12c6.628 0 12-5.373 12-12zm-19.823-30.72c4.687-4.686 4.687-12.284 0-16.97-4.686-4.686-12.284-4.686-16.97 0-4.687 4.686-4.687 12.284 0 16.97 4.686 4.687 12.284 4.687 16.97 0z"},r.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 67 67",to:"360 67 67",dur:"8s",repeatCount:"indefinite"}))))}var V=r.forwardRef(F);n.p;var J,Y,G,K,X,q,Q,U,Z,$,ee,te,ne,re,ae,ce,oe=function(e){var t=e.categories,n=e.notes;return e.loading?Object(v.jsx)("div",{id:"main-dashboard-table__loading",children:Object(v.jsx)(V,{style:{height:"6rem",width:"6rem"}})}):Object(v.jsxs)("div",{id:"main-dashboard-table__container",children:[Object(v.jsx)(H,{timeValues:L}),t.map((function(e,t){return Object(v.jsx)(B,{categories:e,notes:n[t],weekDay:t},e[0].weekDay)}))]})},ie=(n(207),["title","titleId"]);function se(){return(se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function le(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ue(e,t){var n=e.title,a=e.titleId,c=le(e,ie);return r.createElement("svg",se({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 477.175 477.175",style:{enableBackground:"new 0 0 477.175 477.175"},xmlSpace:"preserve",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,J||(J=r.createElement("g",null,r.createElement("path",{d:"M145.188,238.575l215.5-215.5c5.3-5.3,5.3-13.8,0-19.1s-13.8-5.3-19.1,0l-225.1,225.1c-5.3,5.3-5.3,13.8,0,19.1l225.1,225 c2.6,2.6,6.1,4,9.5,4s6.9-1.3,9.5-4c5.3-5.3,5.3-13.8,0-19.1L145.188,238.575z"}))),Y||(Y=r.createElement("g",null)),G||(G=r.createElement("g",null)),K||(K=r.createElement("g",null)),X||(X=r.createElement("g",null)),q||(q=r.createElement("g",null)),Q||(Q=r.createElement("g",null)),U||(U=r.createElement("g",null)),Z||(Z=r.createElement("g",null)),$||($=r.createElement("g",null)),ee||(ee=r.createElement("g",null)),te||(te=r.createElement("g",null)),ne||(ne=r.createElement("g",null)),re||(re=r.createElement("g",null)),ae||(ae=r.createElement("g",null)),ce||(ce=r.createElement("g",null)))}var de,fe,pe,ge,ye,be,he,je,ve,me,xe,Oe,we,ke,Ee,Te,De=r.forwardRef(ue),Ce=(n.p,["title","titleId"]);function Se(){return(Se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Pe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ne(e,t){var n=e.title,a=e.titleId,c=Pe(e,Ce);return r.createElement("svg",Se({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 477.175 477.175",style:{enableBackground:"new 0 0 477.175 477.175"},xmlSpace:"preserve",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,de||(de=r.createElement("g",null,r.createElement("path",{d:"M360.731,229.075l-225.1-225.1c-5.3-5.3-13.8-5.3-19.1,0s-5.3,13.8,0,19.1l215.5,215.5l-215.5,215.5 c-5.3,5.3-5.3,13.8,0,19.1c2.6,2.6,6.1,4,9.5,4c3.4,0,6.9-1.3,9.5-4l225.1-225.1C365.931,242.875,365.931,234.275,360.731,229.075z "}))),fe||(fe=r.createElement("g",null)),pe||(pe=r.createElement("g",null)),ge||(ge=r.createElement("g",null)),ye||(ye=r.createElement("g",null)),be||(be=r.createElement("g",null)),he||(he=r.createElement("g",null)),je||(je=r.createElement("g",null)),ve||(ve=r.createElement("g",null)),me||(me=r.createElement("g",null)),xe||(xe=r.createElement("g",null)),Oe||(Oe=r.createElement("g",null)),we||(we=r.createElement("g",null)),ke||(ke=r.createElement("g",null)),Ee||(Ee=r.createElement("g",null)),Te||(Te=r.createElement("g",null)))}var Ie,_e=r.forwardRef(Ne),Ae=(n.p,function(e){var t=e.weekNr,n=e.year,r=h((function(e){return e.settings.nextWeek})),a=h((function(e){return e.settings.previousWeek})),c=h((function(e){return e.settings.toCurrentWeek})),o=y.DateTime.now().weekNumber,i=y.DateTime.now().startOf("week").year;return Object(v.jsxs)("div",{id:"main-dashboard-nav-container",children:[Object(v.jsx)("div",{id:"main-dashboard-nav-back-to-current-container",children:!(o===t&&i===n)&&Object(v.jsx)("button",{id:"main-dashboard-nav-back-to-current",onClick:function(){c()},children:"To current week"})}),Object(v.jsxs)("div",{id:"main-dashboard-nav-central-container",children:[Object(v.jsx)(De,{onClick:function(){a({date:{weekNr:t,year:n}})},id:"main-dashboard-week-change-button"}),Object(v.jsxs)("h2",{id:"main-dashboard-nav-banner",children:[n,","]}),Object(v.jsxs)("h2",{id:"main-dashboard-nav-banner",children:["week ",t]}),Object(v.jsx)(_e,{onClick:function(){r({date:{weekNr:t,year:n}})},id:"main-dashboard-week-change-button"})]}),Object(v.jsx)("div",{style:{width:"33%",height:"60px"}})]})}),Me=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=!0,e.next=4,fetch("api/user/".concat(t,"/category-type/").concat(n),{method:"DELETE",mode:"cors",credentials:"include"});case 4:return 401===(a=e.sent).status?(ur.push("/login"),r=!1):a.ok||(ur.push("/internalError"),r=!1),e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(0),ur.push("/internalError"),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),Be=function(){var e=Object(d.a)(u.a.mark((function e(t,n,r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("api/user/".concat(t,"/category-types"),{method:"POST",mode:"cors",credentials:"include",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({color:r,name:n})});case 3:return 401===(a=e.sent).status?ur.push("/login"):a.ok||ur.push("/internalError"),e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(0),ur.push("/internalError"),e.abrupt("return",{});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),Le=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("api/user/".concat(t,"/category-types-full"),{method:"GET",mode:"cors",credentials:"include"});case 3:return 401===(n=e.sent).status?ur.push("/login"):n.ok||ur.push("/internalError"),e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(0),ur.push("/internalError"),e.abrupt("return",{categoryTypes:[],activityTypes:[]});case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),He=function(){var e=Object(d.a)(u.a.mark((function e(t,n,r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("api/user/".concat(t,"/week?week_number=").concat(n,"&week_year=").concat(r),{method:"GET",mode:"cors",credentials:"include"});case 3:if(!(a=e.sent).ok){e.next=10;break}return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 10:return 400===a.status&&ur.push("/internalError"),e.next=13,ze(t,n,r);case 13:return e.abrupt("return",e.sent);case 14:e.next=22;break;case 16:return e.prev=16,e.t0=e.catch(0),ur.push("/internalError"),e.next=21,ze(t,n,r);case 21:return e.abrupt("return",e.sent);case 22:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t,n,r){return e.apply(this,arguments)}}(),ze=function(){var e=Object(d.a)(u.a.mark((function e(t,n,r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("api/user/".concat(t,"/weeks"),{method:"POST",mode:"cors",credentials:"include",headers:new Headers({"content-type":"application/json"}),body:JSON.stringify({weekNr:n,weekYear:r})});case 3:if(!(a=e.sent).ok){e.next=10;break}return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 10:return ur.push("/internalError"),e.abrupt("return",[]);case 12:e.next=18;break;case 14:return e.prev=14,e.t0=e.catch(0),ur.push("/internalError"),e.abrupt("return",[]);case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t,n,r){return e.apply(this,arguments)}}(),We=function(e,t,n){var r={valid:!0,message:""};return!t||t.trim().length<=0||t.trim().length>50?(r.valid=!1,r.message="You must provide a category name of length 1-50."):(!n||n.length<=0||n.length>7||"#"!==n[0])&&(r.valid=!1,r.message="You must provide a valid hex color value."),r},Re=n(36),Fe=(n(208),["title","titleId"]);function Ve(){return(Ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Je(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ye(e,t){var n=e.title,a=e.titleId,c=Je(e,Fe);return r.createElement("svg",Ve({height:"329pt",viewBox:"0 0 329.26933 329",width:"329pt",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,Ie||(Ie=r.createElement("path",{d:"m194.800781 164.769531 128.210938-128.214843c8.34375-8.339844 8.34375-21.824219 0-30.164063-8.339844-8.339844-21.824219-8.339844-30.164063 0l-128.214844 128.214844-128.210937-128.214844c-8.34375-8.339844-21.824219-8.339844-30.164063 0-8.34375 8.339844-8.34375 21.824219 0 30.164063l128.210938 128.214843-128.210938 128.214844c-8.34375 8.339844-8.34375 21.824219 0 30.164063 4.15625 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921875-2.089844 15.082031-6.25l128.210937-128.214844 128.214844 128.214844c4.160156 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921874-2.089844 15.082031-6.25 8.34375-8.339844 8.34375-21.824219 0-30.164063zm0 0"})))}var Ge=r.forwardRef(Ye),Ke=(n.p,function(){localStorage.setItem("feature-popup","true")}),Xe=function(){var e=localStorage.getItem("feature-popup");return null!=e&&"true"===e},qe=function(){var e=h((function(e){return e.settings.setFeaturePopupViewed}));return Object(v.jsxs)("div",{className:"new-feature-popup__container",children:[Object(v.jsxs)("div",{className:"new-feature-popup",children:[Object(v.jsx)("p",{children:"New Daily analytics available."}),Object(v.jsx)(Re.a,{onClick:Ke,style:{textDecoration:"none"},to:"/analytics",children:"Check out"})]}),Object(v.jsx)("div",{className:"new-feature-popup__header",children:Object(v.jsx)(Ge,{className:"close-icon",onClick:function(){e({featurePopupViewed:!0}),Ke()}})})]})},Qe=function(){var e=j((function(e){return e.settings.featurePopupViewed})),t=j((function(e){return e.auth.uid})),n=j((function(e){return e.settings.currentDate})),r=j((function(e){return e.categories.categories})),c=j((function(e){return e.notes.notes})),o=h((function(e){return e.categories.setCategories})),i=h((function(e){return e.notes.setNotes})),s=h((function(e){return e.settings.setCategoryTypes})),l=h((function(e){return e.settings.setActivityTypes})),f=h((function(e){return e.settings.setFeaturePopupViewed})),p=a.a.useState(!0),y=Object(g.a)(p,2),b=y[0],m=y[1];return a.a.useEffect((function(){!function(){var e=Object(d.a)(u.a.mark((function e(){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,He(t,n.weekNr,n.year);case 3:return r=e.sent,o({categories:r[0].categories}),i({notes:r[0].notes}),e.next=8,Le(t);case 8:a=e.sent,s({categoryTypes:a.categoryTypes}),l({activityTypes:a.activityTypes}),m(!1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[n.weekNr,n.year,t]),a.a.useEffect((function(){f({featurePopupViewed:Xe()})}),[f]),Object(v.jsxs)("div",{id:"main-dash-wrapper",children:[Object(v.jsx)(Ae,{weekNr:n.weekNr,year:n.year}),Object(v.jsx)(oe,{categories:r,notes:c,loading:b}),!e&&Object(v.jsx)(qe,{})]})},Ue=(n(213),function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("api/user/".concat(t,"/auth/is-logged-in"),{method:"GET",mode:"cors",credentials:"include"});case 3:if(!(n=e.sent).ok){e.next=8;break}return e.abrupt("return",n.ok);case 8:return 401!==n.status&&ur.push("/internalError"),e.abrupt("return",!1);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(0),ur.push("/internalError"),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()),Ze=function(){var e=h((function(e){return e.auth.login})),t=h((function(e){return e.auth.setuid})),n=a.a.useState(""),r=Object(g.a)(n,2),c=r[0],o=r[1],i=a.a.useState(""),s=Object(g.a)(i,2),l=s[0],f=s[1],p=a.a.useState(!0),y=Object(g.a)(p,2),b=y[0],j=y[1];a.a.useEffect((function(){Object(d.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=window.localStorage.getItem("userid"))){e.next=8;break}return e.next=4,Ue(n);case 4:e.sent?t({userid:n}):j(!1),e.next=9;break;case 8:j(!1);case 9:case"end":return e.stop()}}),e)})))()}),[]);return b?Object(v.jsx)("div",{id:"login-loading",children:Object(v.jsx)(V,{style:{height:"6rem",width:"6rem"}})}):Object(v.jsxs)("div",{id:"login-container",children:[Object(v.jsx)("h2",{style:{marginBottom:0},className:"login-header",children:"Welcome, curious person!"}),Object(v.jsx)("h3",{style:{marginBottom:10},className:"login-header",children:"Log in!"}),Object(v.jsxs)("form",{onSubmit:function(t){t.preventDefault(),c&&c.length>0&&l&&l.length>0&&e({email:c,password:l})},children:[Object(v.jsxs)("label",{children:[Object(v.jsx)("p",{style:{marginBottom:"5px"},children:"Email"}),Object(v.jsx)("input",{style:{marginBottom:"20px"},type:"text",value:c,onChange:function(e){return o(e.target.value)}})]}),Object(v.jsxs)("label",{children:[Object(v.jsx)("p",{style:{marginBottom:"5px"},children:"Password"}),Object(v.jsx)("input",{style:{marginBottom:"20px"},type:"password",value:l,onChange:function(e){return f(e.target.value)}})]}),Object(v.jsx)("div",{className:"login-button-container",children:Object(v.jsx)("button",{className:"login-button",type:"submit",children:"Login"})})]})]})},$e=function(){return Object(v.jsxs)("div",{style:{height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:["This page doesn't exist.",Object(v.jsx)(Re.a,{to:"/",children:"Go home"})]})};n(214),n(215),n(216);var et,tt=function(e){var t=e.title;return Object(v.jsx)("div",{id:"settings-dashboard-section-title-container",children:t})},nt=n(62),rt=(n(217),["title","titleId"]);function at(){return(at=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ct(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ot(e,t){var n=e.title,a=e.titleId,c=ct(e,rt);return r.createElement("svg",at({height:"448pt",viewBox:"0 0 448 448",width:"448pt",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,et||(et=r.createElement("path",{d:"m408 184h-136c-4.417969 0-8-3.582031-8-8v-136c0-22.089844-17.910156-40-40-40s-40 17.910156-40 40v136c0 4.417969-3.582031 8-8 8h-136c-22.089844 0-40 17.910156-40 40s17.910156 40 40 40h136c4.417969 0 8 3.582031 8 8v136c0 22.089844 17.910156 40 40 40s40-17.910156 40-40v-136c0-4.417969 3.582031-8 8-8h136c22.089844 0 40-17.910156 40-40s-17.910156-40-40-40zm0 0"})))}var it=r.forwardRef(ot);n.p;var st=function(e){var t=e.categoryTypes,n=e.setCategory,r=e.selectedCategoryid,c=h((function(e){return e.settings.setCategoryTypes})),o=j((function(e){return e.auth.uid})),i=a.a.useState(!1),s=Object(g.a)(i,2),l=s[0],f=s[1],p=a.a.useState(""),y=Object(g.a)(p,2),b=y[0],m=y[1],x=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"Escape"===t.key&&(f(!1),m(""));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(u.a.mark((function e(r){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),!(l&&b.length>0)){e.next=9;break}return e.next=4,Be(o,b,"#CBC3E3");case 4:a=e.sent,c({categoryTypes:[].concat(Object(nt.a)(t),[a])}),n(a.categoryid),f(!1),m("");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a.a.useEffect((function(){return document.addEventListener("keydown",x,!1),function(){document.removeEventListener("keydown",x,!1)}}),[]),Object(v.jsxs)("div",{id:"category-section-category-list-container",children:[t.map((function(e){return Object(v.jsx)("div",{id:"category-section-category-list-item-container",children:Object(v.jsx)("p",{id:"category-section-category-list-item".concat(e.categoryid===r?"-selected":""),onClick:function(){return n(e.categoryid)},children:e.name})},e.categoryid)})),l&&Object(v.jsx)("form",{onSubmit:O,children:Object(v.jsx)("input",{autoFocus:!0,type:"text",value:b,onChange:function(e){return m(e.target.value)},className:"category-section-category-list-add-input"})}),!l&&Object(v.jsx)(it,{height:16,width:16,fill:"white",className:"category-section-category-list-add",onClick:function(){return f(!0)}})]})},lt=(n(218),function(e){var t=e.children,n=e.title;return Object(v.jsxs)("div",{id:"category-section-section-container",children:[Object(v.jsx)("h5",{id:"category-section-section-title",children:n}),t]})}),ut=(n(219),n(220),function(e){var t=e.activity,n=e.onChange,r=a.a.useState(t.long),c=Object(g.a)(r,2),o=c[0],i=c[1],s=a.a.useState(t.short),l=Object(g.a)(s,2),u=l[0],d=l[1],f=function(){n({long:o,short:u,activityid:t.activityid,categoryid:t.categoryid,archived:t.archived,userid:t.userid})};return Object(v.jsx)("div",{id:"activity-list-item-container",children:Object(v.jsxs)("div",{id:"activity-list-item-input-container",children:[Object(v.jsx)("input",{type:"text",value:o,onChange:function(e){return i(e.target.value)},id:"activity-list-item-long-input",onBlur:f,maxLength:40}),"-",Object(v.jsx)("input",{type:"text",value:u,onChange:function(e){return d(e.target.value)},id:"activity-list-item-short-input",onBlur:f,maxLength:2})]})})}),dt=function(e){var t=e.activityTypes,n=e.categoryid,r=e.setError,a=h((function(e){return e.settings.updateActivityType})),c=function(e){var t=function(e,t){var n={valid:!0,message:""};return!e||e.trim().length<=0||e.trim().length>100?(n.valid=!1,n.message="Activity long name must be of length 1-18."):(!t||t.length<=0||t.length>2)&&(n.valid=!1,n.message="Activity short name must be of length 1-2."),n}(e.long,e.short),n=t.valid,c=t.message;n?(a({activityType:e}),r({message:""})):r({message:c})};return Object(v.jsx)("div",{children:t.map((function(e){return e.categoryid===n?Object(v.jsx)(ut,{activity:e,onChange:c},e.activityid):null}))})};var ft=function(e){var t=e.category,n=e.activityTypes,r=e.setLoading,c=e.resetSelectedCategoryid,o=j((function(e){return e.auth.uid})),i=h((function(e){return e.settings.updateCategoryType})),s=h((function(e){return e.settings.removeCategoryType})),l=a.a.useState(t.color),f=Object(g.a)(l,2),p=f[0],y=f[1],b=a.a.useState(t.name),m=Object(g.a)(b,2),x=m[0],O=m[1],w=a.a.useState({message:""}),k=Object(g.a)(w,2),E=k[0],T=k[1],D=a.a.useState({message:""}),C=Object(g.a)(D,2),S=C[0],P=C[1];a.a.useEffect((function(){y(t.color),O(t.name)}),[t.name,t.categoryid,t.color]);var N=function(){var e=Object(d.a)(u.a.mark((function e(){var n,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=We(t.categoryid,x,p),a=n.valid,c=n.message,!a||0!==S.message.length){e.next=8;break}return r(!0),e.next=5,i({categoryType:{userid:t.userid,categoryid:t.categoryid,name:x,color:p,archived:t.archived}});case 5:r(!1),e.next=9;break;case 8:a||T({message:c});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me(o,t.categoryid);case 2:e.sent&&(s({categoryType:t}),c());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{id:"category-section-form-container",children:[Object(v.jsx)("div",{id:"category-section-form-error",children:E.message}),Object(v.jsx)(lt,{title:"Name",children:Object(v.jsx)("input",{type:"text",className:"category-section-form__category-name",value:x,onChange:function(e){return O(e.target.value)},maxLength:18})}),Object(v.jsx)(lt,{title:"Color",children:Object(v.jsxs)("div",{id:"color-section-container",children:[Object(v.jsx)("div",{style:{backgroundColor:p},id:"color-section-color"}),Object(v.jsx)("input",{style:{color:p},type:"text",className:"category-section-form__category-color",value:p,onChange:function(e){return y(e.target.value)},maxLength:7})]})}),Object(v.jsx)("div",{id:"category-section-form-error",children:S.message}),Object(v.jsx)(lt,{title:"Activities",children:Object(v.jsx)(dt,{categoryid:t.categoryid,setError:P,activityTypes:n})}),Object(v.jsx)(lt,{title:"",children:Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{className:"button-dlt",onClick:I,style:{marginRight:40},children:"Archive"}),Object(v.jsx)("button",{className:"button-pos",onClick:N,children:"Save"})]})})]})};var pt,gt,yt,bt,ht,jt,vt,mt,xt,Ot,wt,kt,Et,Tt,Dt,Ct,St,Pt=function(e){var t=e.categoryTypes,n=e.activityTypes,r=e.setLoading,c=a.a.useState(0===t.length?"":t[0].categoryid),o=Object(g.a)(c,2),i=o[0],s=o[1];return Object(v.jsxs)("div",{id:"category-section-container",children:[Object(v.jsx)(tt,{title:"Categories"}),Object(v.jsxs)("div",{id:"category-section-content-container",children:[Object(v.jsx)(st,{categoryTypes:t,setCategory:function(e){return s(e)},selectedCategoryid:i}),0!==i.length&&Object(v.jsx)(ft,{resetSelectedCategoryid:function(){t.length>0&&s(t[0].categoryid)},category:function(){for(var e=0;e<t.length;e++)if(t[e].categoryid===i)return t[e];return{categoryid:"",userid:"",color:"",name:"",archived:!1}}(),activityTypes:n,setLoading:r})]})]})},Nt=function(e){var t=e.categoryTypes,n=e.activityTypes,r=e.loading,a=e.setLoading;return r?Object(v.jsx)("div",{id:"settings-dashboard__loading",children:Object(v.jsx)(V,{style:{height:"6rem",width:"6rem"}})}):Object(v.jsxs)("div",{id:"settings-dashboard-container",children:[Object(v.jsx)("div",{id:"settings-dashboard-title",children:"Settings"}),Object(v.jsx)(Pt,{categoryTypes:t,activityTypes:n,setLoading:a})]})},It=function(){var e=j((function(e){return e.auth.uid})),t=j((function(e){return e.settings.categoryTypes})),n=j((function(e){return e.settings.activityTypes})),r=h((function(e){return e.settings.setCategoryTypes})),c=h((function(e){return e.settings.setActivityTypes})),o=a.a.useState(!0),i=Object(g.a)(o,2),s=i[0],l=i[1];return a.a.useEffect((function(){!function(){var t=Object(d.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(!0),t.next=3,Le(e);case 3:n=t.sent,r({categoryTypes:n.categoryTypes}),c({activityTypes:n.activityTypes}),l(!1);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[]),Object(v.jsx)(Nt,{categoryTypes:t,activityTypes:n,loading:s,setLoading:l})},_t=(n(221),["title","titleId"]);function At(){return(At=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Mt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Bt(e,t){var n=e.title,a=e.titleId,c=Mt(e,_t);return r.createElement("svg",At({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,pt||(pt=r.createElement("g",null,r.createElement("g",null,r.createElement("path",{d:"M255.15,468.625H63.787c-11.737,0-21.262-9.526-21.262-21.262V64.638c0-11.737,9.526-21.262,21.262-21.262H255.15 c11.758,0,21.262-9.504,21.262-21.262S266.908,0.85,255.15,0.85H63.787C28.619,0.85,0,29.47,0,64.638v382.724 c0,35.168,28.619,63.787,63.787,63.787H255.15c11.758,0,21.262-9.504,21.262-21.262 C276.412,478.129,266.908,468.625,255.15,468.625z"})))),gt||(gt=r.createElement("g",null,r.createElement("g",null,r.createElement("path",{d:"M505.664,240.861L376.388,113.286c-8.335-8.25-21.815-8.143-30.065,0.213s-8.165,21.815,0.213,30.065l92.385,91.173 H191.362c-11.758,0-21.262,9.504-21.262,21.262c0,11.758,9.504,21.263,21.262,21.263h247.559l-92.385,91.173 c-8.377,8.25-8.441,21.709-0.213,30.065c4.167,4.21,9.653,6.336,15.139,6.336c5.401,0,10.801-2.041,14.926-6.124l129.276-127.575 c4.04-3.997,6.336-9.441,6.336-15.139C512,250.302,509.725,244.88,505.664,240.861z"})))),yt||(yt=r.createElement("g",null)),bt||(bt=r.createElement("g",null)),ht||(ht=r.createElement("g",null)),jt||(jt=r.createElement("g",null)),vt||(vt=r.createElement("g",null)),mt||(mt=r.createElement("g",null)),xt||(xt=r.createElement("g",null)),Ot||(Ot=r.createElement("g",null)),wt||(wt=r.createElement("g",null)),kt||(kt=r.createElement("g",null)),Et||(Et=r.createElement("g",null)),Tt||(Tt=r.createElement("g",null)),Dt||(Dt=r.createElement("g",null)),Ct||(Ct=r.createElement("g",null)),St||(St=r.createElement("g",null)))}var Lt,Ht,zt,Wt,Rt=r.forwardRef(Bt),Ft=(n.p,["title","titleId"]);function Vt(){return(Vt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Jt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Yt(e,t){var n=e.title,a=e.titleId,c=Jt(e,Ft);return r.createElement("svg",Vt({height:"512pt",viewBox:"0 0 512 512",width:"512pt",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,Lt||(Lt=r.createElement("path",{d:"m197.332031 0h-160c-20.585937 0-37.332031 16.746094-37.332031 37.332031v96c0 20.589844 16.746094 37.335938 37.332031 37.335938h160c20.589844 0 37.335938-16.746094 37.335938-37.335938v-96c0-20.585937-16.746094-37.332031-37.335938-37.332031zm0 0"})),Ht||(Ht=r.createElement("path",{d:"m197.332031 213.332031h-160c-20.585937 0-37.332031 16.746094-37.332031 37.335938v224c0 20.585937 16.746094 37.332031 37.332031 37.332031h160c20.589844 0 37.335938-16.746094 37.335938-37.332031v-224c0-20.589844-16.746094-37.335938-37.335938-37.335938zm0 0"})),zt||(zt=r.createElement("path",{d:"m474.667969 341.332031h-160c-20.589844 0-37.335938 16.746094-37.335938 37.335938v96c0 20.585937 16.746094 37.332031 37.335938 37.332031h160c20.585937 0 37.332031-16.746094 37.332031-37.332031v-96c0-20.589844-16.746094-37.335938-37.332031-37.335938zm0 0"})),Wt||(Wt=r.createElement("path",{d:"m474.667969 0h-160c-20.589844 0-37.335938 16.746094-37.335938 37.332031v224c0 20.589844 16.746094 37.335938 37.335938 37.335938h160c20.585937 0 37.332031-16.746094 37.332031-37.335938v-224c0-20.585937-16.746094-37.332031-37.332031-37.332031zm0 0"})))}var Gt,Kt=r.forwardRef(Yt),Xt=(n.p,["title","titleId"]);function qt(){return(qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Qt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ut(e,t){var n=e.title,a=e.titleId,c=Qt(e,Xt);return r.createElement("svg",qt({enableBackground:"new 0 0 24 24",height:512,viewBox:"0 0 24 24",width:512,xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,Gt||(Gt=r.createElement("path",{d:"m22.683 9.394-1.88-.239c-.155-.477-.346-.937-.569-1.374l1.161-1.495c.47-.605.415-1.459-.122-1.979l-1.575-1.575c-.525-.542-1.379-.596-1.985-.127l-1.493 1.161c-.437-.223-.897-.414-1.375-.569l-.239-1.877c-.09-.753-.729-1.32-1.486-1.32h-2.24c-.757 0-1.396.567-1.486 1.317l-.239 1.88c-.478.155-.938.345-1.375.569l-1.494-1.161c-.604-.469-1.458-.415-1.979.122l-1.575 1.574c-.542.526-.597 1.38-.127 1.986l1.161 1.494c-.224.437-.414.897-.569 1.374l-1.877.239c-.753.09-1.32.729-1.32 1.486v2.24c0 .757.567 1.396 1.317 1.486l1.88.239c.155.477.346.937.569 1.374l-1.161 1.495c-.47.605-.415 1.459.122 1.979l1.575 1.575c.526.541 1.379.595 1.985.126l1.494-1.161c.437.224.897.415 1.374.569l.239 1.876c.09.755.729 1.322 1.486 1.322h2.24c.757 0 1.396-.567 1.486-1.317l.239-1.88c.477-.155.937-.346 1.374-.569l1.495 1.161c.605.47 1.459.415 1.979-.122l1.575-1.575c.542-.526.597-1.379.127-1.985l-1.161-1.494c.224-.437.415-.897.569-1.374l1.876-.239c.753-.09 1.32-.729 1.32-1.486v-2.24c.001-.757-.566-1.396-1.316-1.486zm-10.683 7.606c-2.757 0-5-2.243-5-5s2.243-5 5-5 5 2.243 5 5-2.243 5-5 5z"})))}var Zt,$t,en,tn,nn,rn,an,cn,on,sn,ln,un,dn,fn,pn,gn,yn,bn=r.forwardRef(Ut),hn=(n.p,["title","titleId"]);function jn(){return(jn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function vn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function mn(e,t){var n=e.title,a=e.titleId,c=vn(e,hn);return r.createElement("svg",jn({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,Zt||(Zt=r.createElement("g",null,r.createElement("g",null,r.createElement("path",{d:"M501.333,490.667h-10.667V181.333c0-5.888-4.779-10.667-10.667-10.667h-64c-5.888,0-10.667,4.779-10.667,10.667v309.333 h-42.667V309.333c0-5.888-4.779-10.667-10.667-10.667h-64c-5.888,0-10.667,4.779-10.667,10.667v181.333h-42.667v-224 c0-5.888-4.779-10.667-10.667-10.667h-64c-5.888,0-10.667,4.779-10.667,10.667v224h-42.667V373.333 c0-5.888-4.779-10.667-10.667-10.667H32c-5.888,0-10.667,4.779-10.667,10.667v117.333H10.667C4.779,490.667,0,495.445,0,501.333 C0,507.221,4.779,512,10.667,512H32h64h64h64h64h64h64h64h21.333c5.888,0,10.667-4.779,10.667-10.667 C512,495.445,507.221,490.667,501.333,490.667z"})))),$t||($t=r.createElement("g",null,r.createElement("g",null,r.createElement("path",{d:"M448,0c-23.531,0-42.667,19.136-42.667,42.667c0,7.893,2.304,15.189,6.037,21.547l-69.824,69.824 C335.189,130.304,327.893,128,320,128c-13.376,0-25.195,6.315-33.024,15.979l-52.416-14.955c0-0.341,0.107-0.661,0.107-1.024 c0-23.531-19.136-42.667-42.667-42.667S149.333,104.469,149.333,128c0,6.208,1.387,12.053,3.776,17.365l-66.667,53.184 C79.915,194.453,72.256,192,64,192c-23.531,0-42.667,19.136-42.667,42.667c0,23.531,19.136,42.667,42.667,42.667 c23.531,0,42.667-19.136,42.667-42.667c0-7.488-2.112-14.443-5.525-20.565l65.344-52.117c7.147,5.376,15.915,8.683,25.515,8.683 c15.637,0,29.205-8.555,36.629-21.141l49.429,14.101c-0.405,2.304-0.725,4.629-0.725,7.04c0,23.531,19.136,42.667,42.667,42.667 c23.531,0,42.667-19.136,42.667-42.667c0-7.893-2.304-15.189-6.037-21.547l69.845-69.845c6.336,3.755,13.632,6.059,21.525,6.059 c23.531,0,42.667-19.136,42.667-42.667C490.667,19.136,471.531,0,448,0z"})))),en||(en=r.createElement("g",null)),tn||(tn=r.createElement("g",null)),nn||(nn=r.createElement("g",null)),rn||(rn=r.createElement("g",null)),an||(an=r.createElement("g",null)),cn||(cn=r.createElement("g",null)),on||(on=r.createElement("g",null)),sn||(sn=r.createElement("g",null)),ln||(ln=r.createElement("g",null)),un||(un=r.createElement("g",null)),dn||(dn=r.createElement("g",null)),fn||(fn=r.createElement("g",null)),pn||(pn=r.createElement("g",null)),gn||(gn=r.createElement("g",null)),yn||(yn=r.createElement("g",null)))}var xn,On,wn,kn=r.forwardRef(mn),En=(n.p,["title","titleId"]);function Tn(){return(Tn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Dn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Cn(e,t){var n=e.title,a=e.titleId,c=Dn(e,En);return r.createElement("svg",Tn({id:"Layer_1",enableBackground:"new 0 0 512 512",height:512,viewBox:"0 0 512 512",width:512,xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},c),n?r.createElement("title",{id:a},n):null,xn||(xn=r.createElement("path",{d:"m464.883 64.267h-417.766c-25.98 0-47.117 21.136-47.117 47.149 0 25.98 21.137 47.117 47.117 47.117h417.766c25.98 0 47.117-21.137 47.117-47.117 0-26.013-21.137-47.149-47.117-47.149z"})),On||(On=r.createElement("path",{d:"m464.883 208.867h-417.766c-25.98 0-47.117 21.136-47.117 47.149 0 25.98 21.137 47.117 47.117 47.117h417.766c25.98 0 47.117-21.137 47.117-47.117 0-26.013-21.137-47.149-47.117-47.149z"})),wn||(wn=r.createElement("path",{d:"m464.883 353.467h-417.766c-25.98 0-47.117 21.137-47.117 47.149 0 25.98 21.137 47.117 47.117 47.117h417.766c25.98 0 47.117-21.137 47.117-47.117 0-26.012-21.137-47.149-47.117-47.149z"})))}var Sn=r.forwardRef(Cn),Pn=(n.p,function(){var e=a.a.useState("/dashboard"),t=Object(g.a)(e,2),n=t[0],r=t[1],c=a.a.useState(""),o=Object(g.a)(c,2),i=o[0],s=o[1],l=a.a.useState(!1),u=Object(g.a)(l,2),d=u[0],f=u[1],y=h((function(e){return e.auth.logout})),b=h((function(e){return e.reset})),m=j((function(e){return e.auth.uid})),x=Object(p.g)();a.a.useEffect((function(){r(x.pathname)}),[x]);return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"nav-bar ".concat(d?"":"closed"),children:[Object(v.jsxs)("div",{className:"nav-bar__inner-container",children:[Object(v.jsx)(Re.a,{to:"/dashboard",onMouseOver:function(){return s("/dashboard")},onMouseLeave:function(){return s("")},children:Object(v.jsx)(Kt,{id:"nav-bar-link-icon",style:{fill:"/dashboard"===n||"/dashboard"===i?"#c48852":"white",marginTop:20}})}),Object(v.jsx)(Re.a,{to:"/analytics",onMouseEnter:function(){return s("/analytics")},onMouseLeave:function(){return s("")},children:Object(v.jsx)(kn,{id:"nav-bar-link-icon",style:{fill:"/analytics"===n||"/analytics"===i?"#c48852":"white"}})}),Object(v.jsx)(Re.a,{to:"/settings",onMouseEnter:function(){return s("/settings")},onMouseLeave:function(){return s("")},children:Object(v.jsx)(bn,{id:"nav-bar-link-icon",style:{fill:"/settings"===n||"/settings"===i?"#c48852":"white"}})})]}),Object(v.jsx)("div",{onClick:function(){b(),y({userid:m})},children:Object(v.jsx)(Rt,{id:"nav-bar-logout-icon",height:50,width:50})})]}),Object(v.jsx)(Sn,{className:"nav-bar-toggle-icon ".concat(d?"":"closed"),onClick:function(){return f(!d)},style:{marginLeft:d?80:20}})]})}),Nn=function(e){var t=j((function(e){return e.auth.uid})),n=!!t,r=e.component;return Object(v.jsxs)(v.Fragment,{children:[""!==t&&Object(v.jsx)(Pn,{}),Object(v.jsx)(p.b,{path:e.path,component:function(){return n?Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(r,{})}):Object(v.jsx)(p.a,{to:"/"})}})]})},In=function(e){var t=!!j((function(e){return e.auth.uid})),n=e.component;return Object(v.jsx)(p.b,{path:e.path,component:function(){return t?Object(v.jsx)(p.a,{to:"/dashboard"}):Object(v.jsx)(n,{})}})},_n=function(){return a.a.useEffect((function(){window.onload=function(){ur.push("/")}}),[]),Object(v.jsx)("div",{style:{height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:"Internal server error. Please refresh the page in a minute."})},An=(n(222),n(223),function(e){var t=e.tabs,n=e.onSelect,r=e.selectedIndex;return Object(v.jsx)("div",{className:"tab-bar",children:t.map((function(e,t){return Object(v.jsx)("h3",{onClick:function(){return n(t)},className:"tab-bar-item ".concat(r===t?"selected-item":""),children:e},e)}))})}),Mn=function(){var e=Object(d.a)(u.a.mark((function e(t,n,r){var a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("api/user/".concat(t,"/analytics/total-per-day?week_number=").concat(n,"&week_year=").concat(r),{method:"GET",mode:"cors",credentials:"include"});case 3:if(!(a=e.sent).ok){e.next=10;break}return e.next=7,a.json();case 7:c=e.sent,e.next=12;break;case 10:404!==a.status&&ur.push("/internalError"),c=[];case 12:return e.abrupt("return",c);case 15:return e.prev=15,e.t0=e.catch(0),ur.push("/internalError"),e.abrupt("return",[]);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n,r){return e.apply(this,arguments)}}(),Bn=function(){var e=Object(d.a)(u.a.mark((function e(t,n,r){var a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("api/user/".concat(t,"/analytics/total-per-week?week_number=").concat(n,"&week_year=").concat(r),{method:"GET",mode:"cors",credentials:"include"});case 3:if(!(a=e.sent).ok){e.next=10;break}return e.next=7,a.json();case 7:c=e.sent,e.next=12;break;case 10:404!==a.status&&ur.push("/internalError"),c={categoryTypes:[],activityTypes:[]};case 12:return e.abrupt("return",c);case 15:return e.prev=15,e.t0=e.catch(0),ur.push("/internalError"),e.abrupt("return",{categoryTypes:[],activityTypes:[]});case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n,r){return e.apply(this,arguments)}}(),Ln=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("api/user/".concat(t,"/analytics/available-dates"),{method:"GET",mode:"cors",credentials:"include"});case 3:if(n=e.sent,r=[],!n.ok){e.next=11;break}return e.next=8,n.json();case 8:r=e.sent,e.next=12;break;case 11:ur.push("/internalError");case 12:return e.abrupt("return",r);case 15:return e.prev=15,e.t0=e.catch(0),ur.push("/internalError"),e.abrupt("return",[]);case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),Hn=(n(224),n(127),function(e){var t=e.totalPerWeek;return Object(v.jsx)("table",{style:{width:"100%"},children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"total-per-week-table__category-header",style:{textAlign:"left"},children:"Category"}),Object(v.jsx)("th",{className:"total-per-week-table__category-header",children:"Hours"})]}),t.categoryTypes.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsxs)("td",{className:"total-per-week-table__category-row__cell cell",children:[Object(v.jsx)("div",{className:"total-per-week-table__category-color",style:{backgroundColor:e.color}}),e.name]}),Object(v.jsx)("td",{className:"total-per-week-table__category-row__cell-count cell",children:y.Duration.fromObject({minutes:15*e.count}).toFormat("h:mm")})]},e.categoryid)}))]})})}),zn=(n(225),function(){return Object(v.jsx)("div",{className:"no-analytics-banner",children:"You have no analytics for this week."})}),Wn=n(371),Rn=n(80),Fn=n(175),Vn=n(94),Jn=function(e){var t=e.totalPerWeek,n=function(e){var t=e.payload;return e.active&&t&&t.length?Object(v.jsx)("div",{className:"custom-tooltip",children:t.map((function(e){return Object(v.jsxs)("p",{style:{color:e.payload.stroke},children:[e.name,": ",e.value&&y.Duration.fromObject({minutes:15*e.value}).toFormat("h:mm"),"h"]})}))}):null};return Object(v.jsxs)(Wn.a,{width:300,height:300,children:[Object(v.jsx)(Rn.a,{content:Object(v.jsx)(n,{})}),Object(v.jsx)(Fn.a,{data:t.categoryTypes,cx:145,cy:150,innerRadius:75,outerRadius:100,paddingAngle:5,dataKey:"count",animationBegin:10,animationDuration:900,children:t.categoryTypes.map((function(e,t){return Object(v.jsx)(Vn.a,{fill:e.color,stroke:"black"},"cell-".concat(t))}))})]})},Yn=(n(355),function(e){var t=e.totalPerWeek,n=e.pickedCategoryid,r=e.color,a=function(e){var t=e.payload;return e.active&&t&&t.length?Object(v.jsx)("div",{className:"custom-tooltip",children:t.map((function(e){return Object(v.jsxs)("p",{style:{color:e.payload.stroke},children:[e.name,": ",e.value&&y.Duration.fromObject({minutes:15*e.value}).toFormat("h:mm"),"h"]})}))}):null};return Object(v.jsxs)(Wn.a,{width:300,height:300,children:[Object(v.jsx)(Rn.a,{content:Object(v.jsx)(a,{})}),Object(v.jsx)(Fn.a,{data:t.activityTypes.filter((function(e){return e.categoryid===n})),cx:145,cy:150,innerRadius:75,outerRadius:100,fill:"#8884d8",paddingAngle:5,dataKey:"count",animationBegin:10,animationDuration:900,nameKey:"long",children:t.activityTypes.map((function(e,t){return e.categoryid===n?Object(v.jsx)(Vn.a,{fill:r,stroke:"black"},"cell-".concat(t)):null}))})]})}),Gn=(n(356),function(e){var t=e.label,n=e.options,r=e.onSelect,a=e.selected,c=e.styleSelect,o=e.text;return Object(v.jsxs)("div",{className:"tool-bar-item__dropdown",children:[Object(v.jsx)("label",{className:"tool-bar-item__label",htmlFor:"dropdown",children:t}),Object(v.jsx)("select",{style:c,value:a,className:"tool-bar-item__dropdown__select",name:"dropdown",onChange:function(e){return r(e.target.value,e.target.selectedIndex)},children:n.map((function(e,t){return Object(v.jsx)("option",{value:e,children:o?o[t]:e},t)}))})]})}),Kn=function(e){var t=e.totalPerWeek,n=e.pickedCategoryid,r=e.color;return Object(v.jsx)("table",{style:{width:"100%"},children:Object(v.jsxs)("tbody",{children:[Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{className:"total-per-week-table__category-header",style:{textAlign:"left"},children:"Activity  "}),Object(v.jsx)("th",{className:"total-per-week-table__category-header",children:"Hours total"})]}),t.activityTypes.map((function(e){return e.categoryid===n?Object(v.jsxs)("tr",{children:[Object(v.jsxs)("td",{className:"total-per-week-table__category-row__cell cell",children:[Object(v.jsx)("div",{className:"total-per-week-table__category-color",style:{backgroundColor:r}}),e.long]}),Object(v.jsx)("td",{className:"total-per-week-table__category-row__cell-count cell",children:y.Duration.fromObject({minutes:15*e.count}).toFormat("h:mm")})]},e.activityid):null}))]})})},Xn=function(e){var t=e.totalPerWeek,n=a.a.useState(0),r=Object(g.a)(n,2),c=r[0],o=r[1];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"total-per-week-activities-wrapper__description-container",children:[Object(v.jsx)("p",{className:"total-per-week-activities-wrapper__description-text",children:"For category"}),Object(v.jsx)(Gn,{styleSelect:{marginTop:0,marginBottom:"10px"},label:"",options:t.categoryTypes.flatMap((function(e){return e.name})),onSelect:function(e,t){return o(t)},selected:t.categoryTypes[c].name})]}),Object(v.jsx)(Kn,{color:t.categoryTypes[c].color,totalPerWeek:t,pickedCategoryid:t.categoryTypes[c].categoryid}),Object(v.jsx)(Yn,{color:t.categoryTypes[c].color,totalPerWeek:t,pickedCategoryid:t.categoryTypes[c].categoryid})]})},qn=function(e){var t=e.totalPerWeek;e.availableDates;return e.loading?Object(v.jsx)("div",{id:"main-dashboard-table__loading",children:Object(v.jsx)(V,{style:{height:"6rem",width:"6rem"}})}):Object(v.jsx)("div",{className:"total-per-week",children:0!==t.categoryTypes.length?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"card",style:{marginLeft:0,marginTop:0},children:[Object(v.jsx)("h3",{className:"card-title",children:"Categories"}),Object(v.jsx)(Hn,{totalPerWeek:t}),Object(v.jsx)(Jn,{totalPerWeek:t})]}),Object(v.jsxs)("div",{className:"card",style:{marginTop:0},children:[Object(v.jsx)("h3",{className:"card-title",children:"Activities"}),Object(v.jsx)(Xn,{totalPerWeek:t})]})]}):Object(v.jsx)(zn,{})})},Qn=(n(357),function(e){var t=e.children;return Object(v.jsx)("div",{className:"tool-bar",children:t})}),Un=function(e,t){for(var n=[],r=0;r<e.length;r++)e[r].year===t&&(n=e[r].weeks);return n},Zn=function(e,t){return e.map((function(e){return"".concat(y.DateTime.fromObject({weekNumber:e,weekYear:t}).startOf("week").toLocaleString({month:"short",day:"numeric"})," - \n        ").concat(y.DateTime.fromObject({weekNumber:e,weekYear:t}).endOf("week").toLocaleString({month:"short",day:"numeric"}),"\n        ")}))},$n=function(){var e=j((function(e){return e.auth.uid})),t=j((function(e){return e.settings.currentDate})),n=h((function(e){return e.settings.setDate})),r=a.a.useState({categoryTypes:[],activityTypes:[]}),c=Object(g.a)(r,2),o=c[0],i=c[1],s=a.a.useState([]),l=Object(g.a)(s,2),f=l[0],p=l[1],y=a.a.useState(!0),b=Object(g.a)(y,2),m=b[0],x=b[1];a.a.useEffect((function(){Object(d.a)(u.a.mark((function n(){var r,a;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return x(!0),n.next=3,Bn(e,t.weekNr,t.year);case 3:return r=n.sent,i(r),n.next=7,Ln(e);case 7:a=n.sent,p(a),x(!1);case 10:case"end":return n.stop()}}),n)})))()}),[]);var O=function(){var r=Object(d.a)(u.a.mark((function r(a){var c;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Bn(e,a,t.year);case 2:c=r.sent,i(c),n({date:{weekNr:a,year:t.year}});case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}(),w=function(){var t=Object(d.a)(u.a.mark((function t(r){var a,c,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=-1,c=0;case 2:if(!(c<f.length)){t.next=9;break}if(f[c].year!==r){t.next=6;break}return a=Math.max.apply(Math,Object(nt.a)(f[c].weeks)),t.abrupt("break",9);case 6:c++,t.next=2;break;case 9:if(-1===a){t.next=15;break}return t.next=12,Bn(e,a,r);case 12:o=t.sent,i(o),n({date:{year:r,weekNr:a}});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(Qn,{children:[Object(v.jsx)(Gn,{label:"Year",options:f.flatMap((function(e){return e.year})),onSelect:function(e){return w(parseInt(e.toString()))},selected:t.year}),Object(v.jsx)(Gn,{label:"Week",options:Un(f,t.year),onSelect:function(e){return O(parseInt(e.toString()))},selected:t.weekNr,text:Zn(Un(f,t.year),t.year)})]}),Object(v.jsx)(qn,{totalPerWeek:o,loading:m,availableDates:f})]})},er=(n(53),n(367)),tr=n(368),nr=n(181),rr=n(182),ar=n(77),cr=n(185),or=function(e){var t=e.totalPerDay,n=j((function(e){return e.settings.categoryTypes})),r=function(e){var t=e.payload;return e.active&&t&&t.length?Object(v.jsx)("div",{className:"custom-tooltip",children:t.map((function(e){return Object(v.jsxs)("p",{style:{color:e.color},children:[e.dataKey,": ",e.value&&y.Duration.fromObject({minutes:15*e.value}).toFormat("h:mm"),"h"]})}))}):null};return Object(v.jsx)("div",{style:{width:"800px",height:"500px"},children:Object(v.jsx)(er.a,{width:"100%",height:"100%",children:Object(v.jsxs)(tr.a,{width:500,height:300,data:function(e){for(var t=[],n=0;n<e.length;n++){for(var r={weekDay:y.Info.weekdays()[n]},a=0;a<e[n].categories.length;a++){r[e[n].categories[a].name]=e[n].categories[a].count}t.push(r)}return t}(t),margin:{top:20,right:30,left:20,bottom:5},children:[Object(v.jsx)(nr.a,{dataKey:"weekDay",stroke:"white"}),Object(v.jsx)(rr.a,{}),Object(v.jsx)(Rn.a,{content:Object(v.jsx)(r,{}),animationDuration:100,contentStyle:{backgroundColor:"white",borderRadius:"7px"},cursor:!1}),Object(v.jsx)(ar.a,{}),n.map((function(e){if(e.categoryid)return Object(v.jsx)(cr.a,{dataKey:e.name,stackId:"a",fill:e.color},e.categoryid)}))]})})})},ir=function(e){var t=e.loading,n=e.totalPerDay;return t?Object(v.jsx)("div",{id:"main-dashboard-table__loading",children:Object(v.jsx)(V,{style:{height:"6rem",width:"6rem"}})}):Object(v.jsxs)("div",{className:"total-per-day card",style:{marginLeft:0,marginTop:"40px"},children:[Object(v.jsx)("h3",{className:"card-title",children:"Categories"}),Object(v.jsx)(or,{totalPerDay:n})]})},sr=function(){var e=h((function(e){return e.settings.setCategoryTypes})),t=h((function(e){return e.settings.setActivityTypes})),n=h((function(e){return e.settings.setDate})),r=j((function(e){return e.auth.uid})),c=j((function(e){return e.settings.currentDate})),o=a.a.useState([]),i=Object(g.a)(o,2),s=i[0],l=i[1],f=a.a.useState([]),p=Object(g.a)(f,2),y=p[0],b=p[1],m=a.a.useState(!0),x=Object(g.a)(m,2),O=x[0],w=x[1];a.a.useEffect((function(){Object(d.a)(u.a.mark((function n(){var a,o,i;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return w(!0),n.next=3,Le(r);case 3:return a=n.sent,e({categoryTypes:a.categoryTypes}),t({activityTypes:a.activityTypes}),n.next=8,Mn(r,c.weekNr,c.year);case 8:return o=n.sent,l(o),n.next=12,Ln(r);case 12:i=n.sent,b(i),w(!1);case 15:case"end":return n.stop()}}),n)})))()}),[]);var k=function(){var e=Object(d.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mn(r,t,c.year);case 2:a=e.sent,l(a),n({date:{weekNr:t,year:c.year}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,c,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=-1,c=0;case 2:if(!(c<y.length)){e.next=9;break}if(y[c].year!==t){e.next=6;break}return a=Math.max.apply(Math,Object(nt.a)(y[c].weeks)),e.abrupt("break",9);case 6:c++,e.next=2;break;case 9:if(-1===a){e.next=15;break}return e.next=12,Mn(r,a,t);case 12:o=e.sent,l(o),n({date:{year:t,weekNr:a}});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(Qn,{children:[Object(v.jsx)(Gn,{label:"Year",options:y.flatMap((function(e){return e.year})),onSelect:function(e){return E(parseInt(e.toString()))},selected:c.year}),Object(v.jsx)(Gn,{label:"Week",options:Un(y,c.year),onSelect:function(e){return k(parseInt(e.toString()))},selected:c.weekNr,text:Zn(Un(y,c.year),c.year)})]}),Object(v.jsx)(ir,{loading:O,totalPerDay:s})]})},lr=function(){var e=["Weekly","Daily"],t=a.a.useState(0),n=Object(g.a)(t,2),r=n[0],c=n[1];return Object(v.jsxs)("div",{className:"analytics-dashboard-wrapper",children:[Object(v.jsx)(An,{tabs:e,selectedIndex:r,onSelect:function(e){return c(e)}}),e.map((function(e,t){return 0===r&&r===t?Object(v.jsx)($n,{},t):1===r&&r===t?Object(v.jsx)(sr,{},t):void 0}))]})},ur=Object(f.a)(),dr=function(){return Object(v.jsx)(p.c,{history:ur,children:Object(v.jsxs)(p.d,{children:[Object(v.jsx)(In,{path:"/",component:Ze,exact:!0}),Object(v.jsx)(In,{path:"/internalError",component:_n,exact:!1}),Object(v.jsx)(Nn,{path:"/analytics",component:lr}),Object(v.jsx)(Nn,{path:"/dashboard",component:Qe}),Object(v.jsx)(Nn,{path:"/settings",component:It}),Object(v.jsx)(p.b,{component:$e})]})})},fr={uid:"",login:Object(i.f)(function(){var e=Object(d.a)(u.a.mark((function e(t,n){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("api/auth/login",{method:"POST",mode:"cors",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n.email,password:n.password})});case 3:if(!(r=e.sent).ok){e.next=12;break}return e.next=7,r.json();case 7:a=e.sent,window.localStorage.setItem("userid",a[0].userid),t.setuid({userid:a[0].userid}),e.next=13;break;case 12:401!==r.status&&ur.push("/internalError");case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),ur.push("/internalError");case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n){return e.apply(this,arguments)}}()),setuid:Object(i.b)((function(e,t){e.uid=t.userid})),logout:Object(i.f)(function(){var e=Object(d.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("api/user/".concat(n.userid,"/auth/logout"),{method:"GET",mode:"cors",credentials:"include"});case 3:e.sent.ok?(window.localStorage.removeItem("userid"),t.setuid({userid:""})):ur.push("/internalError"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),ur.push("/internalError");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}())},pr=n(370),gr=n(95),yr={notes:[],setNotes:Object(i.b)((function(e,t){e.notes=t.notes})),syncToDb:Object(i.g)((function(e){return[e.aboveDifference,e.belowDifference,e.deleteNoteStack,e.deleteNoteText,e.setNoteText]}),Object(gr.debounce)(function(){var e=Object(d.a)(u.a.mark((function e(t,n){var r,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=mr.getState().auth.uid,a=mr.getState().notes.notes,c=n.payload.weekDay,e.prev=3,e.next=6,fetch("api/user/".concat(r,"/week/").concat(a[0][0].weekid,"/day/").concat(c,"/notes "),{method:"PATCH",mode:"cors",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a[c])});case 6:e.sent.ok||ur.push("/internalError"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),ur.push("/internalError");case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,n){return e.apply(this,arguments)}}(),200)),aboveDifferenceCache:{draggedIntoPosition:0,dragPosition:0,weekDay:-1,dragStackid:"",dragNoteText:""},aboveDifference:Object(i.b)((function(e,t){var n=t.draggedIntoPosition,r=t.dragPosition,a=t.weekDay,c=t.dragStackid,o=t.dragNoteText;if(e.aboveDifferenceCache.draggedIntoPosition!==n||e.aboveDifferenceCache.dragPosition!==r||e.aboveDifferenceCache.weekDay!==a||e.aboveDifferenceCache.dragStackid!==c||e.aboveDifferenceCache.dragNoteText!==o){for(var i=[],s=n;s<r;s++)i.push(s);for(var l=0;l<e.notes.length;l++)for(var u=0;u<e.notes[l].length;u++){var d=e.notes[l][u];if(i.includes(d.notePosition)&&d.weekDay===a){e.notes[l][u].stackid=c,e.notes[l][u].note=o;for(var f=0;f<e.notes.length;f++)for(var p=0;p<e.notes[f].length;p++){var g=e.notes[f][p];g.stackid===c&&g.weekDay===a&&g.notePosition!==n&&(e.notes[f][p].note="")}}}e.aboveDifferenceCache.draggedIntoPosition=n,e.aboveDifferenceCache.dragPosition=r,e.aboveDifferenceCache.weekDay=a,e.aboveDifferenceCache.dragStackid=c,e.aboveDifferenceCache.dragNoteText=o}})),belowDifferenceCache:{draggedIntoPosition:0,dragPosition:0,weekDay:-1,dragStackid:"",oldStackid:"",oldNote:""},belowDifference:Object(i.b)((function(e,t){var n=t.draggedIntoPosition,r=t.dragPosition,a=t.weekDay,c=t.dragStackid,o=t.oldStackid,i=t.oldNote;if(e.belowDifferenceCache.draggedIntoPosition!==n||e.belowDifferenceCache.dragPosition!==r||e.belowDifferenceCache.weekDay!==a||e.belowDifferenceCache.dragStackid!==c||e.belowDifferenceCache.oldStackid!==o||e.belowDifferenceCache.oldNote!==i){for(var s=[],l=r+1;l<n+1;l++)s.push(l);for(var u=0;u<e.notes.length;u++)for(var d=0;d<e.notes[u].length;d++){var f=e.notes[u][d];if(s.includes(f.notePosition)&&f.weekDay===a){e.notes[u][d].stackid=c;for(var p=0;p<e.notes.length;p++)for(var g=0;g<e.notes[p].length;g++){var y=e.notes[p][g];y.stackid===c&&y.weekDay===a&&y.notePosition!==r&&(e.notes[p][g].note="")}var b=P(e.notes.flat(1),o),h=b.min;if(h!==b.max)for(var j=0;j<e.notes.length;j++)for(var v=0;v<e.notes[j].length;v++){var m=e.notes[j][v];m.stackid===o&&m.weekDay===a&&m.notePosition===h+1&&(e.notes[j][v].note=i)}}}}e.belowDifferenceCache.draggedIntoPosition=n,e.belowDifferenceCache.dragPosition=r,e.belowDifferenceCache.weekDay=a,e.belowDifferenceCache.dragStackid=c,e.belowDifferenceCache.oldStackid=o,e.belowDifferenceCache.oldNote=i})),setNoteText:Object(i.b)((function(e,t){for(var n=0;n<e.notes.length;n++)for(var r=0;r<e.notes[n].length;r++){var a=e.notes[n][r];if(a.notePosition===t.notePosition&&a.weekDay===t.weekDay){e.notes[n][r].note=t.note;break}}})),deleteNoteText:Object(i.b)((function(e,t){for(var n=0;n<e.notes.length;n++)for(var r=0;r<e.notes[n].length;r++){var a=e.notes[n][r];if(a.notePosition===t.notePosition&&a.weekDay===t.weekDay){e.notes[n][r].note="";break}}})),deleteNoteStack:Object(i.b)((function(e,t){for(var n=P(Object(i.e)(e.notes.flat(1)),t.stackid).min,r=0;r<e.notes.length;r++)for(var a=0;a<e.notes[r].length;a++){var c=e.notes[r][a];c.stackid===t.stackid&&c.weekDay===t.weekDay&&(e.notes[r][a].stackid=Object(pr.a)(),c.notePosition!==n&&(e.notes[r][a].note=""))}}))},br={timeHoverIndex:0,setHoverIndex:Object(i.b)((function(e,t){e.timeHoverIndex=t.timeHoverIndex})),activityTypes:[],categoryTypes:[],setActivityTypes:Object(i.b)((function(e,t){e.activityTypes=t.activityTypes})),setCategoryTypes:Object(i.b)((function(e,t){e.categoryTypes=t.categoryTypes})),setCategoryType:Object(i.b)((function(e,t){for(var n=0;n<e.categoryTypes.length;n++)if(e.categoryTypes[n].categoryid===t.categoryType.categoryid){e.categoryTypes[n].name=t.categoryType.name,e.categoryTypes[n].color=t.categoryType.color;break}})),removeCategoryType:Object(i.b)((function(e,t){var n=e.categoryTypes.findIndex((function(e){return e.categoryid===t.categoryType.categoryid}));n>-1&&e.categoryTypes.splice(n,1)})),updateActivityType:Object(i.b)((function(e,t){for(var n=0;n<e.activityTypes.length;n++)if(e.activityTypes[n].activityid===t.activityType.activityid){e.activityTypes[n].long=t.activityType.long,e.activityTypes[n].short=t.activityType.short;break}})),updateCategoryType:Object(i.f)(function(){var e=Object(d.a)(u.a.mark((function e(t,n){var r,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=mr.getState().auth.uid,e.prev=1,e.next=4,fetch("api/user/".concat(r,"/category-type/").concat(n.categoryType.categoryid),{method:"PATCH",mode:"cors",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({color:n.categoryType.color,name:n.categoryType.name})});case 4:if(!(a=e.sent).ok){e.next=12;break}return e.next=8,a.json();case 8:c=e.sent,t.setCategoryType({categoryType:c[0]}),e.next=13;break;case 12:ur.push("/internalError");case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),ur.push("/internalError");case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t,n){return e.apply(this,arguments)}}()),currentDate:{weekNr:y.DateTime.now().weekNumber,year:y.DateTime.now().startOf("week").year},setDate:Object(i.b)((function(e,t){e.currentDate=t.date})),previousWeek:Object(i.b)((function(e,t){var n,r,a=t.date.weekNr,c=t.date.year;1===a?(r=c-1,n=y.DateTime.fromObject({weekYear:r}).weeksInWeekYear):(n=a-1,r=c),e.currentDate={weekNr:n,year:r}})),nextWeek:Object(i.b)((function(e,t){var n,r,a=t.date.weekNr,c=t.date.year;y.DateTime.fromObject({weekYear:c}).weeksInWeekYear===a?(n=1,r=c+1):(n=a+1,r=c),e.currentDate={weekNr:n,year:r}})),toCurrentWeek:Object(i.b)((function(e){e.currentDate={weekNr:y.DateTime.now().weekNumber,year:y.DateTime.now().startOf("week").year}})),featurePopupViewed:!0,setFeaturePopupViewed:Object(i.b)((function(e,t){e.featurePopupViewed=t.featurePopupViewed}))},hr={categories:[],setCategories:Object(i.b)((function(e,t){e.categories=t.categories})),setCategory:Object(i.b)((function(e,t){for(var n=-1,r=-1,a=0;a<e.categories.length;a++)for(var c=0;c<e.categories[a].length;c++){var o=e.categories[a][c];if(o.categoryPosition===t.categoryPosition&&o.weekDay===t.weekDay){n=a,r=c;break}}-1!==n&&-1!==r&&(e.categories[n][r].categoryid=t.categoryid,e.categories[n][r].activityid=null)})),setActivity:Object(i.b)((function(e,t){for(var n=-1,r=-1,a=0;a<e.categories.length;a++)for(var c=0;c<e.categories[a].length;c++){var o=e.categories[a][c];if(o.categoryPosition===t.categoryPosition&&o.weekDay===t.weekDay){n=a,r=c;break}}-1!==n&&-1!==r&&(e.categories[n][r].activityid=t.activityid)})),syncToDb:Object(i.g)((function(e){return[e.categoryDragSet,e.setCategory,e.setActivity]}),Object(gr.debounce)(function(){var e=Object(d.a)(u.a.mark((function e(t,n){var r,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=mr.getState().auth.uid,a=mr.getState().categories.categories,c=n.payload.weekDay,e.prev=3,e.next=6,fetch("api/user/".concat(r,"/week/").concat(a[0][0].weekid,"/day/").concat(c,"/categories "),{method:"PATCH",mode:"cors",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a[c])});case 6:e.sent.ok||ur.push("/internalError"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),ur.push("/internalError");case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,n){return e.apply(this,arguments)}}(),200)),categoryDragSet:Object(i.b)((function(e,t){var n=t.dragPosition,r=t.draggedIntoPosition,a=t.weekDay,c=t.dragCategoryid,o=t.dragActivityid,i=[];if(n>r)for(var s=r;s<n;s++)i.push(s);else for(var l=n+1;l<r+1;l++)i.push(l);for(var u=0;u<e.categories.length;u++)for(var d=0;d<e.categories[u].length;d++){var f=e.categories[u][d];i.includes(f.categoryPosition)&&f.weekDay===a&&(e.categories[u][d].categoryid=c,e.categories[u][d].activityid=o)}}))},jr=Object(i.c)({auth:fr,settings:br,notes:yr,categories:hr,reset:Object(i.b)((function(e,t){return Object(s.a)({},vr)}))}),vr=jr.getState(),mr=jr;n(361);o.a.render(Object(v.jsx)(i.a,{store:mr,children:Object(v.jsx)(dr,{})}),document.getElementById("root"))}},[[362,1,2]]]);
//# sourceMappingURL=main.0d69007a.chunk.js.map